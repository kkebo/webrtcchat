# WebRTC を用いたビデオ/テキストチャット

ビデオ&音声チャットと文字でのチャットが可能です．
ブラウザ上でリアルタイムコミュニケーションを可能にする API である WebRTC を使っているのが特徴で，プラグインは必要ありません．

## 動作要件
- カメラ及びマイク付きのデバイス
- Chrome 23以降，Firefox 22以降，もしくはその他の WebRTC 対応ブラウザ

## 注意事項
1台のデバイスでも動作確認(通話・チャット)が可能です．

また，プログラム本体(index.html, main.js, style.css)はウェブサーバー上でなければ動作しないので，ローカルでも構わないのでウェブサーバーを動作させ，その上で動かしてください．

## 使い方 (準備)
まず，ピア接続が確立させるために WebSocket サーバーが必要なので，
WebSocket サーバーを立てる必要があります．

Node.js がインストールされたマシンで，

```% npm install websocket.io```

といったコマンドを実行し，`webbocket.io` をインストールします．

その後，`server.js` を

```% node server.js```

といったコマンドで実行し，WebSocket サーバーが立ち上がります．

次に，その WebSocket サーバーの URL を `main.js` で指定します．

`main.js` を編集して，15 行目の

```new window.WebSocket('ws://192.168.200.104:51234/');```

の部分を

```new window.WebSocket('ws://WebSocket サーバーのホスト名:51234');```

と変更してください．

これでようやく準備が整います．あらかじめウェブサーバー上に上げておいた `index.html` を開いてください．

## 使い方
ページを開いてまず，名前を聞かれます．ここで，キャンセルを押すと，WebSocket の接続も切れ，ページを再読み込みするまで何もできません．

名前を入力し，カメラやマイクの使用を許可すると，他のユーザが左側のユーザリストに表示されます．

ユーザ名をクリックすると，その人に通話のリクエストを送信し，その人が許可すれば，通話が始まります．このとき，チャット用のパネルも右側に出てきます．
